# 词法（v0 草案）

目标：先定义最小 token 集合，让 parser 能工作。

## 空白与注释

- 空白字符：space、tab、换行；除分隔 token 外不产生语义
- 行注释：`//` 到行末

（可选后续）块注释：`/* ... */`

## 标识符

- `Identifier`：`[A-Za-z_][A-Za-z0-9_]*`
- 关键字不能作为标识符（除非未来引入转义标识符）

## 关键字（建议集合）

模块：`module` `import` `export`

名字空间：`using` `namespace` `as`

 泛型与约束：`trait` `impl` `for` `sealed`

声明与控制流：`const` `mut` `return` `if` `else` `while` `for` `break` `continue`

类型：`void`

注：本语言不提供给用户的 `auto` 关键字；“没写类型 = 推导”是语法层面的省略规则。

## 字面量

### 数字分隔符

数字字面量内部允许使用分隔符：`_` 与 `'`。

规则：分隔符只能出现在两个数字（或两个合法进制数字）之间；不能出现在开头/结尾；不能连续出现。

例：`1_000_000`、`0xDEAD'BEEF`、`0b1010_0101`。

注意：`'` 同时也是字符字面量的引号；词法上按“最长匹配”扫描即可：当扫描到一个数字字面量时，若中间出现 `'` 且左右仍可构成该进制的数字，则把它当作分隔符；若输入以 `'` 开始，则它是字符字面量。

### 整数

- 十进制：`0` 或 `[1-9][0-9]*`
- 十六进制：`0x` 或 `0X` 开头，后接 `[0-9a-fA-F]+`
- 二进制：`0b` 或 `0B` 开头，后接 `[01]+`

- 八进制：`0o` 或 `0O` 开头，后接 `[0-7]+`

整数后缀（需要实现，参考 C++ 风格）：
- `u` / `U`：unsigned
- `l` / `L`：long
- 组合：`ul` / `uL` / `Ul` / `UL` / `lu` / `lU` / `Lu` / `LU`

例：`1`、`1u`、`1l`、`1ul`。

### 浮点

目标：支持 C++ 风格的指数写法：`1e-7`、`1e9`。

建议支持的形式：
- `Digits '.' Digits? ExponentPart?`
- `'.' Digits ExponentPart?`
- `Digits ExponentPart`

其中：
- `Digits` 为一段十进制数字（允许分隔符 `_`/`'`）
- `ExponentPart` 为：`[eE][+-]?Digits`

例：`3.14`、`1.`、`.5`、`1e9`、`1e-7`、`3.14e+2`。

浮点后缀（需要实现）：
- `f` / `F`

例：`1.`、`1f`、`1.0f`、`1e-3f`。

### 字符

字符字面量：单引号包裹的单个字符：`'A'`。

支持转义（最小集合）：`\\` `\'` `\"` `\n` `\t` `\r` `\0` `\xNN`。

### 字符串

字符串字面量：双引号包裹：`"Hello World"`。

支持与字符相同的转义序列。

## 符号与操作符（最小）

- 分隔符：`(` `)` `{` `}` `[` `]` `,` `;` `:`
- 箭头：`->`
- 泛型：`<` `>`
- 运算：`=` `+` `-` `*` `/`
- 访问：`.`（仅用于成员访问，例如 `obj.field`）
- 访问：`::`（用于名字空间/模块限定名，例如 `X::Y::add`）
